<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Panel Administracyjny - kapitanie</title>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
</head>
<body>
  <!-- Decap CMS - najnowsza wersja -->
  <script src="https://unpkg.com/decap-cms@^3.3.0/dist/decap-cms.js"></script>
  
  <script>
    
    // Check if we're in authentication flow
    if (window.location.search.includes('code=')) {
    }
    
    // Load and check config
    window.addEventListener('load', function() {
      
      fetch('/admin/config.yml')
        .then(response => {
          return response.text();
        })
        .then(config => {
          
          // Parse key settings
          const baseUrlMatch = config.match(/base_url:\s*(.+)/);
          const authEndpointMatch = config.match(/auth_endpoint:\s*(.+)/);
          
          if (baseUrlMatch) console.log('🌐 Base URL:', baseUrlMatch[1]);
          if (authEndpointMatch) console.log('🔑 Auth endpoint:', authEndpointMatch[1]);
        })
        
    });
    
    
  </script>

  <script>
    // Wymuś rejestrację widgetu 'date' jeśli CMS go nie widzi
    if (window.CMS && typeof window.CMS.registerWidget === 'function') {
      window.CMS.registerWidget('date');
    } else {
      window.addEventListener('DOMContentLoaded', function() {
        if (window.CMS && typeof window.CMS.registerWidget === 'function') {
          window.CMS.registerWidget('date');
        }
      });
    }
  </script>
</body>
</html>
