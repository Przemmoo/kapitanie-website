---
// Import global animations
import "../styles/animations.css";

export interface Props {
	title?: string;
	description?: string;
	keywords?: string;
	noindex?: boolean;
}

const { 
	title = "kapitanie - Twój cel, nasza nawigacja. Perfekcyjne eventy.", 
	description = "Jesteśmy kapitanami technicznej strony Twojego sukcesu. Zapewniamy kompleksową obsługę multimedialną eventów, koncertów i konferencji.",
	keywords = "eventy, multimedia, oświetlenie, nagłośnienie, konferencje, koncerty, obsługa techniczna",
	noindex = false
} = Astro.props;
---

<!doctype html>
<html lang="pl">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		<meta name="description" content={description} />
		<meta name="keywords" content={keywords} />
		<meta name="robots" content={noindex ? "noindex, nofollow" : "index, follow"} />
		
		<!-- Google Fonts - Montserrat i Lato -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800&family=Lato:wght@400;700&display=swap" rel="stylesheet">
		
		<!-- Preload critical resources -->
		<link rel="preload" href="/favicon.svg" as="image" type="image/svg+xml">
		
		<!-- DNS prefetch for external resources -->
		<link rel="dns-prefetch" href="//www.googletagmanager.com">
		<link rel="dns-prefetch" href="//unpkg.com">
		
		<!-- SEO Meta Tags -->
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:type" content="website" />
		<meta property="og:image" content="/images/og-default.jpg" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		<meta name="twitter:image" content="/images/og-default.jpg" />
		<link rel="canonical" href={Astro.url?.href || 'https://kapitanie.com'} />
		<meta name="theme-color" content="#00A9FF" />
		<link rel="manifest" href="/manifest.json" />

		<!-- Google Analytics 4 -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-R4ML1FD38P"></script>
		<script is:inline>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){window.dataLayer.push(arguments);}
		  gtag('js', new Date());
		  gtag('config', 'G-R4ML1FD38P');
		</script>

		<!-- Google Search Console - zweryfikowane przez dostawcę domeny -->
		
		<!-- Schema.org JSON-LD -->
		<script type="application/ld+json">
		{
			"@context": "https://schema.org",
			"@type": "Organization",
			"name": "kapitanie",
			"description": "Kompleksowa obsługa multimedialna eventów, koncertów i konferencji",
			"address": {
				"@type": "PostalAddress",
				"streetAddress": "ul. Różana 54B/1",
				"addressLocality": "Wieliczka",
				"postalCode": "32-020",
				"addressCountry": "PL"
			},
			"contactPoint": {
				"@type": "ContactPoint",
				"telephone": "+48-501-181-703",
				"contactType": "customer service",
				"email": "kontakt@kapitanie.pl"
			}
		}
		</script>
		<!-- Monitoring Core Web Vitals - Only in development -->
		{import.meta.env.DEV && (
			<>
				<script src="https://unpkg.com/web-vitals@3/dist/web-vitals.iife.js"></script>
				<script is:inline>
				  // Web Vitals monitoring for development only
				  window.addEventListener('load', function() {
				    if (window.webVitals) {
				      window.webVitals.getCLS(console.log);
				      window.webVitals.getFID(console.log);
				      window.webVitals.getLCP(console.log);
				      window.webVitals.getFCP(console.log);
				      window.webVitals.getTTFB(console.log);
				    }
				  });
				</script>
			</>
		)}
	</head>
	<body>
		<!-- Skip links for accessibility -->
		<div class="skip-links">
			<a href="#main-content" class="skip-link">Przejdź do głównej treści</a>
			<a href="#main-navigation" class="skip-link">Przejdź do nawigacji</a>
			<a href="#footer-content" class="skip-link">Przejdź do stopki</a>
		</div>
		
		<slot />
	</body>
</html>

<style is:global>
	/* CSS Reset i zmienne kolorów */
	:root {
		/* Colors - Consolidated naming convention */
		--color-primary: #00A9FF;
		--color-secondary: #FFD700;
		--color-bg-main: #121212;
		--color-bg-secondary: #1F1F1F;
		--color-text-primary: #F5F5F5;
		--color-text-secondary: #B3B3B3;
		--color-error: #FF4444;
		--color-success: #28A745;
		--color-warning: #FFC107;
		
		/* Legacy support - gradually migrate away from these */
		--bg-main: var(--color-bg-main);
		--bg-secondary: var(--color-bg-secondary);
		--accent-blue: var(--color-primary);
		--text-main: var(--color-text-primary);
		--text-secondary: var(--color-text-secondary);
		--error-color: var(--color-error);
		
		/* Spacing System */
		--space-xs: 0.5rem;
		--space-sm: 1rem;
		--space-md: 1.5rem;
		--space-lg: 2rem;
		--space-xl: 3rem;
		--space-2xl: 4rem;
		
		/* Typography Scale */
		--font-size-xs: 0.75rem;
		--font-size-sm: 0.875rem;
		--font-size-base: 1rem;
		--font-size-lg: 1.125rem;
		--font-size-xl: 1.25rem;
		--font-size-2xl: 1.5rem;
		--font-size-3xl: 2rem;
		--font-size-4xl: 2.5rem;
		
		/* Font Families */
		--font-heading: 'Montserrat', -apple-system, BlinkMacSystemFont, sans-serif;
		--font-body: 'Lato', -apple-system, BlinkMacSystemFont, sans-serif;
		
		/* Animation System */
		--duration-fast: 150ms;
		--duration-normal: 300ms;
		--duration-slow: 500ms;
		--easing-ease: cubic-bezier(0.4, 0, 0.2, 1);
		--easing-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
		
		/* Layout */
		--container-max-width: 1200px;
		--section-padding: 80px 0;
		--border-radius-sm: 8px;
		--border-radius-md: 12px;
		--border-radius-lg: 20px;
		
		/* Legacy support */
		--transition-fast: var(--duration-normal) var(--easing-ease);
		
		/* Z-index Scale */
		--z-header: 1000;
		--z-lightbox: 2000;
		--z-cookie-banner: 1500;
		--z-modal: 1600;
		--z-tooltip: 1700;
	}

	* {
		margin: 0;
		padding: 0;
		box-sizing: border-box;
	}

	html {
		scroll-behavior: smooth;
	}

  body {
    font-family: var(--font-body);
    background-color: var(--bg-main);
    color: var(--text-main);
    line-height: 1.6;
    overflow-x: hidden; /* Prevent horizontal scrollbar during animations */
  }	/* Typografia */
	h1, h2, h3, h4, h5, h6 {
		font-family: var(--font-heading);
		font-weight: 700;
		line-height: 1.2;
		margin-bottom: 1rem;
	}

	h1 {
		font-size: clamp(2.5rem, 5vw, 4rem);
		font-weight: 800;
	}

	h2 {
		font-size: clamp(2rem, 4vw, 3rem);
		font-weight: 700;
	}

	h3 {
		font-size: clamp(1.5rem, 3vw, 2rem);
		font-weight: 700;
	}

	p {
		margin-bottom: 1rem;
		color: var(--text-main);
	}

	a {
		color: var(--accent-blue);
		text-decoration: none;
		transition: var(--transition-fast);
	}

	a:hover {
		color: var(--text-main);
	}

	/* Skip links for accessibility */
	.skip-links {
		position: fixed;
		top: -100px;
		left: 0;
		width: 100%;
		z-index: 10000;
		background: var(--bg-main);
		padding: 1rem;
		text-align: center;
	}

	.skip-link {
		display: inline-block;
		padding: 0.75rem 1.5rem;
		margin: 0 0.5rem;
		background: var(--accent-blue);
		color: white;
		text-decoration: none;
		border-radius: 4px;
		font-weight: 600;
		transition: all var(--duration-fast) var(--easing-ease);
	}

	.skip-link:focus,
	.skip-link:active {
		position: relative;
		top: 100px;
		outline: 3px solid var(--text-main);
		outline-offset: 2px;
	}

	.skip-link:hover {
		background: color-mix(in srgb, var(--accent-blue) 85%, black);
		transform: translateY(-2px);
	}

	/* Skip links responsive */
	@media (max-width: 768px) {
		.skip-links {
			padding: 0.75rem;
		}
		
		.skip-link {
			padding: 0.5rem 1rem;
			margin: 0 0.25rem;
			font-size: 0.9rem;
		}
	}

	@media (max-width: 480px) {
		.skip-links {
			padding: 0.5rem;
		}
		
		.skip-link {
			display: block;
			margin: 0.25rem auto;
			width: 90%;
			max-width: 280px;
			text-align: center;
		}
	}

	/* Focus management */
	*:focus {
		outline: 2px solid var(--accent-blue);
		outline-offset: 2px;
	}

	*:focus:not(:focus-visible) {
		outline: none;
	}

	*:focus-visible {
		outline: 2px solid var(--accent-blue);
		outline-offset: 2px;
	}

	/* Kontener */
	.container {
		max-width: var(--container-max-width);
		margin: 0 auto;
		padding: 0 20px;
	}

	/* Przyciski */
	.btn {
		display: flex;
		align-items: center;
		justify-content: center;
		min-height: 48px;
		padding: 12px 30px;
		border-radius: 30px;
		font-weight: 600;
		text-align: center;
		transition: var(--transition-fast);
		cursor: pointer;
		border: none;
		text-decoration: none;
		font-family: var(--font-body);
	}

	.btn-primary {
		background-color: var(--accent-blue);
		color: white;
	}

	.btn-primary:hover {
		background-color: #0088CC;
		transform: translateY(-2px);
		box-shadow: 0 8px 25px rgba(0, 169, 255, 0.3);
	}

	.btn-secondary {
		background-color: transparent;
		color: var(--accent-blue);
		border: 2px solid var(--accent-blue);
	}

	.btn-secondary:hover {
		background-color: var(--accent-blue);
		color: white;
		transform: translateY(-2px);
	}

	/* Sekcje */
	.section {
		padding: var(--section-padding);
	}

	.section-secondary {
		background-color: var(--bg-secondary);
	}

	/* Responsive breakpoints */
	@media (max-width: 768px) {
		.container {
			padding: 0 16px;
			max-width: 100%;
			overflow-x: hidden;
		}
		
		:root {
			--section-padding: 60px 0;
		}
		
		/* Zapobieganie poziomemu przewijaniu */
		body {
			overflow-x: hidden;
		}
		
		/* Responsywne obrazy */
		img {
			max-width: 100%;
			height: auto;
		}
		
		/* Responsywne tabele */
		table {
			width: 100%;
			overflow-x: auto;
			display: block;
			white-space: nowrap;
		}
	}
	
	@media (max-width: 480px) {
		.container {
			padding: 0 12px;
		}
		
		:root {
			--section-padding: 40px 0;
		}
	}

	/* Accessibility */
	@media (prefers-reduced-motion: reduce) {
		* {
			animation-duration: 0.01ms !important;
			animation-iteration-count: 1 !important;
			transition-duration: 0.01ms !important;
		}
		
		html {
			scroll-behavior: auto;
		}
	}

	/* Focus styles */
	*:focus {
		outline: 2px solid var(--accent-blue);
		outline-offset: 2px;
	}

	/* Loading state */
	.loading {
		opacity: 0.6;
		pointer-events: none;
	}

	/* Animations - Optimized for performance */
	.animated-element {
		will-change: transform;
		transform: translateZ(0); /* Force hardware acceleration */
	}
	
	.fade-in {
		animation: fadeIn var(--duration-normal) var(--easing-ease);
	}
	
	.slide-in {
		animation: slideIn var(--duration-normal) var(--easing-ease);
	}
	
	/* Remove will-change after animation completes */
	.animated-element.animation-complete {
		will-change: auto;
	}

	.fade-in-up {
		animation: fadeInUp 0.6s ease-out;
	}
  /* Breadcrumbs SEO */
  .breadcrumbs {
	margin: 1.5rem 0 2rem 0;
	font-size: 0.95rem;
	color: var(--text-secondary);
  }
  .breadcrumbs ol {
	display: flex;
	flex-wrap: wrap;
	gap: 0.5rem;
	list-style: none;
	padding: 0;
	margin: 0;
  }
  .breadcrumbs li {
	display: flex;
	align-items: center;
  }
  .breadcrumbs li:not(:last-child)::after {
	content: "/";
	margin: 0 0.5rem;
	color: var(--accent-blue);
  }
  .breadcrumbs a {
	color: var(--accent-blue);
	text-decoration: underline;
	transition: color 0.2s;
  }
  .breadcrumbs a:hover {
	color: var(--text-main);
  }

  /* Mobile overflow fix for hero animations */
  @media (max-width: 480px) {
    html, body {
      overflow-x: hidden !important;
      width: 100%;
      position: relative;
    }
    
    .hero-section,
    section {
      overflow: hidden;
      width: 100%;
    }
  }

